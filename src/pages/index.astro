---
// biome-ignore lint/correctness/noUnusedImports: Used in Astro template
import Layout from "../layouts/Layout.astro";
// biome-ignore lint/correctness/noUnusedImports: Used in Astro template
import CookieConsent from "../components/CookieConsent/CookieConsent.js";
// biome-ignore lint/correctness/noUnusedImports: Used in Astro template
import MarkdownSection from "../components/MarkdownSection.astro";
// biome-ignore lint/correctness/noUnusedImports: Used in Astro template
import RadioSearch from "../components/RadioSearch/index.js";
// biome-ignore lint/correctness/noUnusedImports: Used in Astro template
import { Content as HomeContent } from "../content/home.md";
import type { RadioStation } from "../api/radio-browser.js";
import { fetchPopularGenresAndCountriesSorted } from "../api/radio-browser.js";
// biome-ignore lint/correctness/noUnusedImports: Used in Astro template
import { SpecialTag } from "../components/RadioSearch/Tag.js";
import "flag-icons/css/flag-icons.min.css";

// biome-ignore lint/correctness/noUnusedVariables: Used in Astro template
const preloadedStations: RadioStation[] = [];
// biome-ignore lint/correctness/noUnusedVariables: Used in Astro template
const preloadedGenresCountries = await fetchPopularGenresAndCountriesSorted();
---

<Layout
  title="RPlayer - Audio Player for Streaming Radio in action"
  description="RPlayer is a lightweight audio player for streaming radio that supports HLS streams, MP3, AAC and more formats."
  currentPage="home"
>
  <MarkdownSection>
    <HomeContent />
  </MarkdownSection>

  <CookieConsent client:only="react" />

  <h2 class="text-2xl font-bold text-white"><span class="font-semibold">R<span class="text-primary">Player</span></span> in action</h2>
  <RadioSearch
    client:only="react"
    initialTag={SpecialTag.Favorites}
    initialVisibleCount={8}
    limit={16}
    preloadedTags={preloadedGenresCountries}
    preloadedStations={preloadedStations}
  />
</Layout>
